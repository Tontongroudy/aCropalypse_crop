# aCropalypse PNG Generator

> **FOR EDUCATIONAL USE ONLY / POUR USAGE ÉDUCATIF UNIQUEMENT**
> version française en dessous

---

# English 

## Overview
This script (Python 3.8+) generates a PNG that is vulnerable to **aCropalypse** from an existing PNG file. It is intended for testing, research and CTF/lab use **only**.

## Requirements
- **Python 3.8+**
- **Pillow**

Install Pillow with your system package manager or pip:

```bash
sudo apt install python3-pillow
# or
pip install pillow
# You will need a Python virtual environment to run this script properly with pip.
# Create and activate it before installing the dependencies:
python3 -m venv venv
source venv/bin/activate
```

## Usage
```bash
# left and top must be smaller than right and bottom
python3 acropalypse_crop.py [mode] [original_file.png] [output_file.png] left top right bottom
```


## Modes
- `windows`  
  - Preserves alpha (if present): crop in RGBA when the original has an alpha channel, otherwise crop in RGB.  
  - Appends the original file bytes to the cropped PNG (trailer = original bytes).

- `pixel`  
  - Targets RGB: if the original is RGBA, convert the original to RGB in memory, crop that RGB image, and append the bytes of the RGB PNG (trailer = RGB PNG bytes).  
  - If the original is already RGB, behaves like `windows` (crop RGB + append original bytes).

## Examples
```bash
python3 acropalypse_crop.py windows original.png vuln_win.png 0 0 300 300
python3 acropalypse_crop.py pixel   original.png vuln_pix.png 0 0 300 300
```

## Important Note
Use this only on images you are authorized to test (CTF / lab / research). Misuse may violate privacy and laws.

---

## License & Disclaimer
This repository and the provided script are intended for educational and research purposes only. The author(s) accept no responsibility for misuse. By using this tool you agree to comply with local laws and to obtain permission before testing images you do not own.

# Français

## Présentation
Ce script (Python 3.8+) permet de générer, à partir d’un PNG existant, un PNG vulnérable à **aCropalypse**. Il est destiné uniquement à des fins de test, de recherche ou d’utilisation en CTF / laboratoire.

## Prérequis
- **Python 3.8+**
- **Pillow**

Installer Pillow via le gestionnaire de paquets ou pip :

```bash
sudo apt install python3-pillow
# OU
pip install pillow
# Vous aurez besoin d’un environnement virtuel Python pour exécuter ce script correctement.
# Créez-le et activez-le avant l’installation des dépendances :
python3 -m venv venv
source venv/bin/activate
```

## Utilisation
```bash
# gauche et haut doit être inférieur à droit et bas
python3 acropalypse_crop.py [mode] [fichier_original.png] [fichier_sortie.png] gauche haut droit bas
```

## Modes
- `windows`  
  - Conserve l'alpha (si présent) : crop en RGBA si l'original a un canal alpha, sinon en RGB.  
  - Concatène les octets du fichier original au PNG recadré (trailer = octets de l’original).

- `pixel`  
  - Cible RGB : si l'original est RGBA, on convertit une copie en RGB en mémoire, on croppe cette image RGB, puis on concatène les octets du PNG RGB (trailer = octets du PNG RGB).  
  - Si l'original est déjà RGB, le comportement est identique à `windows` (crop RGB + append original).

## Exemples
```bash
python3 acropalypse_crop.py windows original.png vuln_win.png 0 0 300 300
python3 acropalypse_crop.py pixel   original.png vuln_pix.png 0 0 300 300
```

## Remarque importante
N'utilisez ceci que sur des images pour lesquelles vous avez l'autorisation de test (CTF / labo / recherche). Une utilisation abusive peut violer la vie privée et la loi.

---

## Licence et avertissement

Ce dépôt et le script fourni sont destinés uniquement à des fins éducatives et de recherche. Les auteur·rice·s déclinent toute responsabilité en cas d’utilisation abusive. En utilisant cet outil, vous acceptez de respecter la législation locale et d’obtenir les autorisations nécessaires avant de tester des images qui ne vous appartiennent pas.

---
---
---
### Français

Outils : à tester uniquement avec https://github.com/Absenti/acropalypse_png
 — utilisez ce dépôt pour l’analyse et la restauration des images générées par ce script.

⏱️ Le processus peut prendre plus ou moins de temps selon la taille de l’image.


### English

Tools: test only with https://github.com/Absenti/acropalypse_png
 — use that repository for analysis and recovery of images generated by this script.

⏱️ The process may take more or less time depending on the image size.

---

### Made by Gregoryt0 and Tontongroudy
